<% @page_title = "Browse questions on '#{@quiz.name}'" %>
<%= start_form_tag({:action => 'list_quiz_items', :id => @quiz},{:id => 'change_form'}) %>
<div>
<input type="text" name="q" value="<% params[:q] %>"/>
<button type="submit">Search</button>
</div>
<%= end_form_tag %>
<table width="100%" cellpadding="3" cellspacing="0">
  <tr>
    <th>Question</th>
    <th>Summary</th>
    <th>Will be on test</th>
    <th>Order</th>
    <th>Operations</th>
  </tr>
  
  <% 
    index = 0
    for quiz_item in @quiz_items
      index += 1
  %>
  <tr>
    <td><%= quiz_item.question.id %></td>
    <td><%= truncate(quiz_item.question.content, 30) %></td>
    <td><%= quiz_item.is_on_test %></td>
    <td><%= render( :partial => 'positioning', :locals => {:quiz_item => quiz_item, :index => index, :quiz_items => @quiz_items} ) %></td>
    <td>
    <%= link_to('Show', :controller => 'question', :action => 'show', :id => quiz_item.question.id ) %> |
    <% if quiz_item.is_on_test %>
      <%= link_to('Take off Quiz', :action => 'take_off_quiz', :id => @quiz, :quiz_item_id => quiz_item.id ) %> |
    <% else %>
      <%= link_to('Put on Quiz', :action => 'put_on_quiz', :id => @quiz, :quiz_item_id => quiz_item.id ) %> |
    <% end %>
    <%= link_to('Remove', :action => 'remove', :id => @quiz, :quiz_item_id => quiz_item.id ) %>
    </td>
  </tr>
  <% end %>
</table>
<%= link_to('< Previous', :page => @quiz_item_pages.current.previous, 
			  :q => params[:q]) if @quiz_item_pages.current.previous %>
<%= link_to('Next >', :page => @quiz_item_pages.current.next, 
		      :q => params[:q]) if @quiz_item_pages.current.next %>
<br/>
<%= link_to( 'Add questions', :action => 'add_questions', :id => @quiz ) %>
<%= link_to( 'Return to Quiz', :action => 'show', :id => @quiz ) %>
